{
  "schema_version": "cbsp21_patch_input_v1",
  "patch_id": "BUNDLE_32.4.13",
  "title": "Subtle Shake on Disabled Undo/Redo (button + keyboard)",
  "intent": "Add visual feedback (subtle shake animation) when users attempt undo/redo but it's unavailable. Works for both button clicks and keyboard shortcuts. No toast spam - just a gentle shake cue.",
  "change_type": "code",
  "behavior_change": "compatible",
  "risk_level": "low",
  "scope": {
    "repo_root": ".",
    "paths_in_scope": [
      "packages/client/src/components/rosette/"
    ],
    "files_expected_to_change": [
      "packages/client/src/components/rosette/RosetteEditorView.vue"
    ]
  },
  "diff_articulation": {
    "what_changed": [
      "Added undoBtnRef and redoBtnRef template refs for button elements",
      "Added shakeUndo and shakeRedo reactive state booleans",
      "Created triggerShake() function that toggles shake state, uses requestAnimationFrame for restart, auto-clears after 260ms, and focuses the button",
      "Updated undo() no-op guard to call triggerShake('undo') instead of silent return",
      "Updated redo() no-op guard to call triggerShake('redo') instead of silent return",
      "Attached ref='undoBtnRef' and :class='{ shake: shakeUndo }' to Undo button",
      "Attached ref='redoBtnRef' and :class='{ shake: shakeRedo }' to Redo button",
      "Added subtleShake keyframes animation (±2px horizontal movement, 220ms duration)",
      "Added .shake CSS class that applies the animation"
    ],
    "why_not_redundant": "Bundle 32.4.12 added silent no-op suppression (no toast when stacks empty). This enhances that behavior by providing visual feedback via shake animation instead of complete silence. Users now get a subtle cue that undo/redo is unavailable, improving UX without toast spam."
  },
  "diff_range": {
    "base": "origin/main",
    "head": "HEAD"
  },
  "changed_files_count": 1,
  "changed_files_exact": [
    "packages/client/src/components/rosette/RosetteEditorView.vue"
  ],
  "overall_file_context_coverage": 100.0,
  "verification": {
    "commands_run": "Manual code review - verified refs attached, shake state management correct, animation keyframes valid. File scanned: 575/575 lines (100% coverage)."
  },
  "notes": "Shake animation is intentionally subtle (±2px, 220ms). Works for both button clicks and keyboard shortcuts (Ctrl+Z, Ctrl+Shift+Z, Ctrl+Y). Button is auto-focused during shake for keyboard accessibility. No toast spam - just visual feedback."
}
