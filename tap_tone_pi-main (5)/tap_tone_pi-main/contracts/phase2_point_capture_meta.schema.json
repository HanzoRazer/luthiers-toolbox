{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "contracts/phase2_point_capture_meta.schema.json",
  "title": "Phase2PointCaptureMeta",
  "type": "object",
  "additionalProperties": false,
  "required": ["schema_version", "point_id", "created_at_utc", "sample_rate_hz", "channels", "seconds", "channel_roles"],
  "properties": {
    "schema_version": { "type": "string", "const": "phase2_point_capture_meta_v1" },

    "point_id": { "type": "string", "pattern": "^[A-Z][0-9]{1,2}$" },
    "created_at_utc": { "type": "string" },

    "device_index": { "type": "integer", "minimum": 0 },
    "device_name": { "type": "string" },

    "sample_rate_hz": { "type": "integer", "minimum": 8000 },
    "channels": { "type": "integer", "const": 2 },
    "seconds": { "type": "number", "exclusiveMinimum": 0 },

    "channel_roles": {
      "type": "object",
      "additionalProperties": false,
      "required": ["ch0", "ch1"],
      "properties": {
        "ch0": { "type": "string", "enum": ["reference"] },
        "ch1": { "type": "string", "enum": ["roving"] }
      }
    },

    "excitation": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "type": { "type": "string", "enum": ["speaker_air", "tap_impulse", "shaker", "unknown"] },
        "notes": { "type": "string" }
      }
    },

    "sensor": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "reference_sensor": { "type": "string" },
        "roving_sensor": { "type": "string" },
        "distance_mm": { "type": "number" }
      }
    },

    "warnings": {
      "type": "array",
      "items": { "type": "string" }
    }
  }
}
