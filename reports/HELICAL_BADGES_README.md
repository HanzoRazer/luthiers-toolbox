# ðŸŒ€ Helical Post-Processor Smoke Status

Real-time G-code generation status for all CNC controller presets.

## Current Status

| Preset | Badge | G-Code Size | Segments | Arc Mode |
|--------|-------|-------------|----------|----------|
| **GRBL** | ![GRBL](https://raw.githubusercontent.com/HanzoRazer/luthiers-toolbox/main/reports/badges/GRBL.svg) | - | - | I,J |
| **Mach3** | ![Mach3](https://raw.githubusercontent.com/HanzoRazer/luthiers-toolbox/main/reports/badges/Mach3.svg) | - | - | I,J |
| **Haas** | ![Haas](https://raw.githubusercontent.com/HanzoRazer/luthiers-toolbox/main/reports/badges/Haas.svg) | - | - | R |
| **Marlin** | ![Marlin](https://raw.githubusercontent.com/HanzoRazer/luthiers-toolbox/main/reports/badges/Marlin.svg) | - | - | I,J |

## Badge Colors

- ðŸŸ¢ **Green**: 5-19 segments (typical complexity)
- ðŸ”µ **Blue**: 20+ segments (complex path)
- ðŸŸ¡ **Yellow**: < 5 segments (minimal path)
- ðŸ”´ **Red**: Error or no output

## What This Tests

Each preset is tested with a standard helical ramping operation:
- **Geometry**: 6mm radius circle at origin
- **Depth**: 0 â†’ -3mm (3mm plunge)
- **Pitch**: 1.5mm/revolution
- **Feed**: 600 mm/min

The smoke test validates:
- âœ… G-code generated successfully
- âœ… Correct arc mode (R for Haas, I/J for others)
- âœ… Correct dwell syntax (G4 S for Haas, G4 P for others)
- âœ… Post preset comment in output
- âœ… Non-empty output with expected segment count

## How to Run Locally

### PowerShell (Windows)
```powershell
# Start API server
cd services/api
uvicorn app.main:app --reload --port 8000

# Run smoke test (separate terminal)
cd tools
.\smoke_helix_posts.ps1

# Generate badges
python ..\services\api\tools\gen_helical_badge.py
```

### Make (Unix/Linux/WSL)
```bash
# Run smoke test (starts API automatically)
make smoke-helix-posts

# Generate badges
python services/api/tools/gen_helical_badge.py
```

### Python Script (Cross-Platform)
```bash
# Start API server first
cd services/api
uvicorn app.main:app --reload --port 8000

# Run smoke test
python tools/run_helical_smoke.py

# Generate badges
python services/api/tools/gen_helical_badge.py
```

## Badge Files

After running smoke tests and badge generation:
- `reports/helical_smoke_posts.json` - Test results data
- `reports/badges/badges.json` - Badge metadata
- `reports/badges/GRBL.svg` - GRBL badge
- `reports/badges/Mach3.svg` - Mach3 badge
- `reports/badges/Haas.svg` - Haas badge
- `reports/badges/Marlin.svg` - Marlin badge

## CI/CD Integration

Badges are automatically regenerated on:
- Every push to `main` branch
- Changes to helical router or post presets
- Manual workflow dispatch
- Nightly at 2 AM UTC

See `.github/workflows/helical_badges.yml` for CI configuration.

## Documentation

- [HELICAL_POST_PRESETS.md](../HELICAL_POST_PRESETS.md) - Full documentation
- [HELICAL_POST_PRESETS_QUICKREF.md](../HELICAL_POST_PRESETS_QUICKREF.md) - Quick reference
- [HELICAL_POST_PRESETS_COMPLETE.md](../HELICAL_POST_PRESETS_COMPLETE.md) - Implementation summary

---

**Last Updated:** Auto-generated by CI  
**Workflow:** `.github/workflows/helical_badges.yml`
